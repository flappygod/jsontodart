<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>JsonToDart</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/TempletAdmin/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/TempletAdmin/layuiadmin/style/admin.css" media="all">
    <script>
        /^http(s*):\/\//.test(location.href) || alert('请先部署到 localhost 下再访问');
    </script>

    <!--垂直滚动-->
    <style>
        .layui-layout-body {
            background: transparent;
            overflow-y: auto;
        }

        .layui-upload-img {
            width: 250px;
            height: 250px;
            margin: 0 10px 10px 0;
            border: 1px solid lightgray;
        }
    </style>

</head>

<!--Body-->
<body class="layui-layout-body">

<!--主要界面-->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-tab layui-tab-card">
            <ul class="layui-tab-title">
                <li class="layui-this">Json转Dart</li>
                <li>MD5加密</li>
                <li>URL编码/解码</li>
                <li>Unicode中文互转</li>
                <li>二维码生成</li>
            </ul>
            <div class="layui-tab-content">


                <!--Json转Dart-->
                <div class="layui-tab-item layui-show">
                    <div class="layui-row">
                        <div class="layui-col-md6  layui-row  ">
                            <div class="layui-card-body layui-row layui-col-space10">
                                <div class="layui-card-header layui-col-md12">输入JSON</div>
                            </div>
                            <div class="layui-card-body layui-row layui-col-space20">
                                <div class="layui-col-sm12 layui-col-md12 layui-col-lg6">
                                    <button name="formatbtn" id="formatbtn" class="layui-btn">格式化Json</button>
                                    <button name="generatebtn" id="generatebtn" class="layui-btn layui-btn-normal">
                                        生成Dart文件
                                    </button>
                                </div>


                                <div class="layui-col-sm12 layui-col-md12 layui-col-lg6">
                                    <div class="layui-form" lay-filter="component-form-element">
                                        <input type="checkbox" name="nullSafety" value="true" title="数据非空" checked>
                                        <input type="checkbox" name="compile" value="true" title="合并嵌套" checked>
                                    </div>
                                </div>


                                <div class="layui-col-md12 layui-col-sm12">
                                    <textarea rows="32" id="jsonInput" name="jsonInput" placeholder="Json输入"
                                              class="layui-textarea"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md6 layui-row ">
                            <div class="layui-card-body layui-row layui-col-space10">
                                <div class="layui-card-header layui-col-md12">输出结果</div>
                            </div>
                            <div class="layui-card-body layui-row layui-col-space20">
                                <div class="layui-col-md6 layui-row">
                                    <input type="text" id="resultname" name="resultname" placeholder="请输入生成类名"
                                           autocomplete="off"
                                           value="AutoGenerated" class="layui-input">
                                </div>
                                <div class="layui-col-md6">
                                    <button name="generatebtn" id="copybtn" class="layui-btn layui-btn-normal">复制结果
                                    </button>
                                </div>
                                <div class="layui-col-md12">
                                    <textarea rows="32" id="resultDart" name="resultDart" placeholder="输出结果"
                                              class="layui-textarea"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--MD5加密-->
                <div class="layui-tab-item">
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">等待加密</div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-col-md4">
                            <input type="text" id="md5Input" name="resultname" placeholder="请输入待加密字符串"
                                   autocomplete="off"
                                   value="" class="layui-input">
                        </div>
                        <div class="layui-col-md4">
                            <button name="md5Generate" id="md5Generate" class="layui-btn layui-btn-normal">MD5加密
                            </button>
                        </div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">加密结果</div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space10">
                        <table class="layui-table" lay-skin="line">
                            <colgroup>
                                <col width="150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <td>16位小写</td>
                                <td id="md16Lower" name="md16Lower"></td>
                            </tr>
                            <tr>
                                <td>16位大写</td>
                                <td id="md16Upper" name="md16Upper"></td>
                            </tr>
                            <tr>
                                <td>32位小写</td>
                                <td id="md32Lower" name="md32Lower"></td>
                            </tr>
                            <tr>
                                <td>32位大写</td>
                                <td id="md32Upper" name="md32Upper"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!--URL编码解码-->
                <div class="layui-tab-item">
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">编码/解码</div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space20">

                        <div class="layui-col-md12">
                            <button name="urlEncodeBtn" id="urlEncodeBtn" class="layui-btn">编码</button>
                            <button name="urlDecodeBtn" id="urlDecodeBtn" class="layui-btn layui-btn-normal">解码
                            </button>
                        </div>

                        <div class="layui-col-md12">
                                    <textarea rows="32" id="urlInput" name="urlEncode" placeholder="请输入"
                                              class="layui-textarea"></textarea>
                        </div>
                    </div>
                </div>

                <!--Unicode编码解码-->
                <div class="layui-tab-item">
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">Unicode中文互转</div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space20">
                        <div class="layui-col-md12">
                            <button name="urlEncodeBtn" id="unicodeEncodeBtn" class="layui-btn">中文转Unicode</button>
                            <button name="urlDecodeBtn" id="unicodeDecodeBtn" class="layui-btn layui-btn-normal">
                                Unicode转中文
                            </button>
                        </div>
                        <div class="layui-col-md12">
                                    <textarea rows="32" id="unicodeInput" name="urlEncode" placeholder="请输入"
                                              class="layui-textarea"></textarea>
                        </div>
                    </div>
                </div>

                <!--二维码生成-->
                <div class="layui-tab-item">

                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">二维码生成</div>
                    </div>

                    <div class="layui-card-body layui-row layui-col-space20">
                        <div class="layui-col-md6 layui-row">
                            <input type="text" id="qrcodeInput" name="qrcodeInput" placeholder="请输入二维码字符串"
                                   autocomplete="off"
                                   value="" class="layui-input">
                        </div>
                        <div class="layui-col-md6">
                            <button name="qrcodeGenerateBtn" id="qrcodeGenerateBtn" class="layui-btn layui-btn-normal">
                                生成二维码
                            </button>
                            <a class="layui-btn layui-btn-normal" name="downloadQrcode" id="downloadQrcode">点击下载</a>
                        </div>
                    </div>

                    <div class="layui-card-body layui-row layui-col-space20">
                        <div class="layui-col-md3 layui-col-sm6">
                            <div class="layui-upload">
                                <div class="layui-upload-list">
                                    <img class="layui-upload-img" name="qrcodeImage" id="qrcodeImage">
                                    <p id="test-upload-demoText"></p>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>


<script src="/TempletAdmin/layuiadmin/layui/layui.js"></script>
<script>

    /*<![CDATA[*/
    layui.config({
        //静态资源所在路径
        base: '/TempletAdmin/layuiadmin/'
    }).extend({
        //主入口模块
        index: 'lib/index'
    }).use(['index', 'form', 'jquery'], function () {

        //赋值
        var $ = layui.$
            , admin = layui.admin
            , element = layui.element
            , layer = layui.layer
            , form = layui.form;


        /*生成dart文件*/
        /*生成dart文件*/
        /*生成dart文件*/
        $('#generatebtn').click(function () {

            //取得json字符串
            var json = $('#jsonInput').val();

            //取得名称
            var className = $('#resultname').val();

            //取得空安全设置
            var nullSafety = $('input[name=nullSafety]:checked').val();

            var compileFlag = $('input[name=compile]:checked').val();

            //请求后台接口
            $.ajax({
                url: "api/jsonToDart",
                type: 'post',
                data: {
                    jsonStr: json.replace(/[\t\n]/g, ''),
                    className: className,
                    nullSafety: nullSafety,
                    compileFlag: compileFlag
                },
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    $('#resultDart').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        //格式化点击
        $('#formatbtn').click(function () {
            //获取json字符串
            var json = $('#jsonInput').val();
            //请求后台接口
            $.ajax({
                url: "api/jsonToPretty",
                type: 'post',
                data: {
                    jsonStr: json.replace(/[\t\n]/g, '')
                },
                beforeSend: function () {
                    //显示转圈圈
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    if (data.code == 200) {
                        $('#jsonInput').val(data.data);
                    } else {
                        $('#resultDart').val(data.msg);
                    }
                },
                complete: function () {
                    //关闭转圈圈
                    layer.close(this.layerIndex);
                },
            });
        });

        //格式化点击
        $('#copybtn').click(function () {
            $("#resultDart").select();
            document.execCommand("Copy");
            layer.msg('复制成功', {icon: 1});
        });


        /*MD5Tab*/
        /*MD5Tab*/
        /*MD5Tab*/
        $('#md5Generate').click(function () {
            //取得json字符串
            var md5 = $('#md5Input').val();
            //请求后台接口
            $.ajax({
                url: "api/md5Generate",
                type: 'post',
                data: {
                    md5Str: md5
                },
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //解析数据
                    var json = JSON.parse(data.data);
                    //加密结果
                    $('#md16Lower').html(json.md16Lower);
                    $('#md16Upper').html(json.md16Upper);
                    $('#md32Lower').html(json.md32Lower);
                    $('#md32Upper').html(json.md32Upper);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        /*编码解码*/
        /*编码解码*/
        /*编码解码*/
        $('#urlEncodeBtn').click(function () {
            //取得json字符串
            var urlStr = $('#urlInput').val();
            //请求后台接口
            $.ajax({
                url: "api/urlEncode",
                type: 'post',
                data: {urlStr: urlStr},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //加密结果
                    $('#urlInput').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        $('#urlDecodeBtn').click(function () {
            //取得json字符串
            var urlStr = $('#urlInput').val();
            //请求后台接口
            $.ajax({
                url: "api/urlDecode",
                type: 'post',
                data: {urlStr: urlStr},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //加密结果
                    $('#urlInput').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });


        /*编码解码Unicode*/
        /*编码解码Unicode*/
        /*编码解码Unicode*/
        $('#unicodeEncodeBtn').click(function () {
            //取得json字符串
            var unicodeStr = $('#unicodeInput').val();
            //请求后台接口
            $.ajax({
                url: "api/unicodeEncode",
                type: 'post',
                data: {unicodeStr: unicodeStr},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //加密结果
                    $('#unicodeInput').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        $('#unicodeDecodeBtn').click(function () {
            //取得json字符串
            var unicodeStr = $('#unicodeInput').val();
            //请求后台接口
            $.ajax({
                url: "api/unicodeDecode",
                type: 'post',
                data: {unicodeStr: unicodeStr},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //加密结果
                    $('#unicodeInput').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        //生成
        $('#qrcodeGenerateBtn').click(function () {
            //取得json字符串
            var qrcodeStr = $('#qrcodeInput').val();
            //请求后台接口
            $.ajax({
                url: "api/qrcodeGenerate",
                type: 'post',
                data: {qrcodeStr: qrcodeStr},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //显示图片
                    if (data.code == 200) {
                        $('#qrcodeImage').attr("src", data.data);
                        $('#qrcodeImage').show();
                        $('#downloadQrcode').attr("href", data.data);
                        $('#downloadQrcode').attr("download", data.data);
                    }
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });


    });
    /*]]>*/
</script>
</body>
</html>
