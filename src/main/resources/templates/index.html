<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>JsonToDart</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/TempletAdmin/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/TempletAdmin/layuiadmin/style/admin.css" media="all">
    <script>
        /^http(s*):\/\//.test(location.href) || alert('请先部署到 localhost 下再访问');
    </script>

    <!--垂直滚动-->
    <style>
        .layui-layout-body {
            background: transparent;
            overflow-y: auto;
        }
    </style>

</head>

<!--Body-->
<body class="layui-layout-body">

<!--主要界面-->
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-tab layui-tab-card">
            <ul class="layui-tab-title">
                <li class="layui-this">Json转Dart</li>
                <li>MD5加密</li>
                <li>权限分配</li>
                <li>商品管理</li>
                <li>订单管理</li>
            </ul>
            <div class="layui-tab-content">
                <!--Json转Dart-->
                <div class="layui-tab-item layui-show">
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-col-md6  layui-row layui-col-space10">

                            <div class="layui-card-header layui-col-md12">输入JSON</div>

                            <div class="layui-col-md12">
                                <button name="formatbtn" id="formatbtn" class="layui-btn">格式化Json</button>
                                <button name="generatebtn" id="generatebtn" class="layui-btn layui-btn-normal">生成Dart文件
                                </button>
                            </div>

                            <div class="layui-col-md12">
                            <textarea rows="32" id="inputjson" name="inputjson" placeholder="Json输入"
                                      class="layui-textarea"></textarea>
                            </div>
                        </div>
                        <div class="layui-col-md6 layui-row layui-col-space10">
                            <div class="layui-card-header layui-col-md12">输出结果</div>

                            <div class="layui-col-md6">
                                <input type="text" id="resultname" name="resultname" placeholder="请输入生成类名"
                                       autocomplete="off"
                                       value="AutoGenerated" class="layui-input">
                            </div>

                            <div class="layui-col-md6">
                                <button name="generatebtn" id="copybtn" class="layui-btn layui-btn-normal">复制结果</button>
                            </div>

                            <div class="layui-col-md12">
                            <textarea rows="32" id="resultdart" name="resultdart" placeholder="输出结果"
                                      class="layui-textarea"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <!--MD5加密-->
                <div class="layui-tab-item">

                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">等待加密</div>
                    </div>
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-col-md4">
                            <input type="text" id="md5Input" name="resultname" placeholder="请输入待加密字符串"
                                   autocomplete="off"
                                   value="" class="layui-input">
                        </div>
                        <div class="layui-col-md4">
                            <button name="md5Generate" id="md5Generate" class="layui-btn layui-btn-normal">MD5加密
                            </button>
                        </div>
                    </div>

                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-card-header layui-col-md12">加密结果</div>
                    </div>

                    <div class="layui-card-body layui-row layui-col-space10">

                        <table class="layui-table" lay-skin="line">
                            <colgroup>
                                <col width="150">
                                <col>
                            </colgroup>
                            <tbody>
                            <tr>
                                <td>16位小写</td>
                                <td id="md16Lower" name="md16Lower"></td>
                            </tr>
                            <tr>
                                <td>16位大写</td>
                                <td id="md16Upper" name="md16Upper"></td>
                            </tr>
                            <tr>
                                <td>32位小写</td>
                                <td id="md32Lower" name="md32Lower"></td>
                            </tr>
                            <tr>
                                <td>32位大写</td>
                                <td id="md32Upper" name="md32Upper"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="layui-tab-item">3</div>
                <div class="layui-tab-item">4</div>
                <div class="layui-tab-item">5</div>
            </div>
        </div>
    </div>
</div>


<script src="/TempletAdmin/layuiadmin/layui/layui.js"></script>
<script>

    /*<![CDATA[*/
    layui.config({
        //静态资源所在路径
        base: '/TempletAdmin/layuiadmin/'
    }).extend({
        //主入口模块
        index: 'lib/index'
    }).use(['index', 'form', 'jquery'], function () {

        //赋值
        var $ = layui.$
            , admin = layui.admin
            , element = layui.element
            , layer = layui.layer
            , form = layui.form;

        //生成dart文件
        $('#generatebtn').click(function () {
            //取得json字符串
            var jsonStr = $('#inputjson').val();
            //取得名称
            var className = $('#resultname').val();
            //请求后台接口
            $.ajax({
                url: "api/jsonToDart",
                type: 'post',
                data: {jsonStr: jsonStr, className: className},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    $('#resultdart').val(data.data);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });

        //格式化点击
        $('#formatbtn').click(function () {
            //获取json字符串
            var jsonStr = $('#inputjson').val();
            //请求后台接口
            $.ajax({
                url: "api/jsonToPretty",
                type: 'post',
                data: {jsonStr: jsonStr},
                beforeSend: function () {
                    //显示转圈圈
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    if (data.code == 200) {
                        $('#inputjson').val(data.data);
                    } else {
                        $('#resultdart').val(data.msg);
                    }
                },
                complete: function () {
                    //关闭转圈圈
                    layer.close(this.layerIndex);
                },
            });
        });

        //格式化点击
        $('#copybtn').click(function () {
            $("#resultdart").select();
            document.execCommand("Copy");
            layer.msg('复制成功', {icon: 1});
        });


        //生成dart文件
        $('#md5Generate').click(function () {
            //取得json字符串
            var md5Str = $('#md5Input').val();
            //请求后台接口
            $.ajax({
                url: "api/md5Generate",
                type: 'post',
                data: {md5Str: md5Str},
                beforeSend: function () {
                    this.layerIndex = layer.load(0, {shade: [0.5, '#393D49']});
                },
                success: function (data) {
                    //解析数据
                    var json = JSON.parse(data.data);
                    //加密结果
                    $('#md16Lower').html(json.md16Lower);
                    $('#md16Upper').html(json.md16Upper);
                    $('#md32Lower').html(json.md32Lower);
                    $('#md32Upper').html(json.md32Upper);
                },
                complete: function () {
                    layer.close(this.layerIndex);
                },
            });
        });


    });
    /*]]>*/
</script>
</body>
</html>
